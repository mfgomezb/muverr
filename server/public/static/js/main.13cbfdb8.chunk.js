(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{160:function(e,t,a){e.exports=a(391)},165:function(e,t,a){},167:function(e,t,a){},289:function(e,t){},391:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(28),l=a.n(c),i=(a(165),a(10)),o=a(16),s=a(18),u=a(17),m=a(19),d=(a(167),a(397)),h=a(396),p=a(37),f=a(393),g=a(49),E=a.n(g);a(81).config();var v=function e(){var t=this;Object(i.a)(this,e),this.signup=function(e,a,n,r,c,l,i,o){console.log(o);var s=new FormData;return s.append("username",e),s.append("password",a),s.append("email",n),s.append("country",r),s.append("city",c),s.append("street",l),s.append("area_code",i),s.append("photo",o),t.service.post("/signup",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){return e.data})},this.login=function(e,a){return t.service.post("/login",{username:e,password:a}).then(function(e){return e.data})},this.loggedin=function(){return t.service.get("/currentUser").then(function(e){return e.data})},this.logout=function(){return t.service.get("/logout").then(function(e){return e.data})},this.payment=function(e){return console.log(e),fetch("".concat("https://muverr.herokuapp.com","/api/auth/charge"),{method:"POST",headers:{"Content-Type":"text/plain"},body:e.id}).then(function(e){return e})},this.service=E.a.create({baseURL:"".concat("https://muverr.herokuapp.com","/api/auth"),withCredentials:!0})},b=a(26),y=a(77),S=a.n(y),O=a(33),C=a.n(O),k=a(20),I=a.n(k),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleLogout=function(e){a.props.logout()},a.state={loggedInUser:null},a.service=new v,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(Object(p.a)({},this.state,{loggedInUser:e.userInSession}))}},{key:"render",value:function(){var e=this;return this.state.loggedInUser?r.a.createElement("div",null,r.a.createElement(S.a,{className:"navbar",position:"static"},r.a.createElement(C.a,null,r.a.createElement(I.a,{className:"navbar"},r.a.createElement(f.a,{className:"link-style link-color",to:"/"},r.a.createElement("b",null,"MUVERR"))),r.a.createElement(I.a,null,r.a.createElement(f.a,{className:"link-style link-color",to:"/transactions"},"Market")),r.a.createElement(I.a,null,r.a.createElement(f.a,{className:"link-style link-color",to:"/sendmoney"},"Send Money")),r.a.createElement(I.a,null,r.a.createElement(f.a,{className:"link-style link-color",to:"/profile"},"Dashboard")),r.a.createElement(I.a,null,r.a.createElement(f.a,{className:"link-style link-color",to:"/",onClick:function(t){return e.handleLogout(t)}},"Logout"))))):r.a.createElement("div",null,r.a.createElement(S.a,{position:"static"},r.a.createElement(C.a,null,r.a.createElement(I.a,{className:"navbar"},r.a.createElement(f.a,{className:"link-style link-color",to:"/"},r.a.createElement("b",null,"MUVERR"))),r.a.createElement(I.a,null,r.a.createElement(f.a,{className:"link-style link-color",to:"/signup"},"Signup")),r.a.createElement(I.a,null,r.a.createElement(f.a,{className:"link-style link-color",to:"/login"},"Login")))))}}]),t}(n.Component),N=Object(b.withStyles)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20}})(j),P=(a(45),function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"index-content"},r.a.createElement("h1",null,"MUVERR"),r.a.createElement("div",{className:"title1"},r.a.createElement("b",null,"Send money to your family")),r.a.createElement("div",{className:"title2"},r.a.createElement("b",null,"Protect your work and savings")))}}]),t}(n.Component)),w=a(31);a(81).config();var x=function e(){var t=this;Object(i.a)(this,e),this.getUser=function(e){return t.service.get("/profile/".concat(e)).then(function(e){return e.data})},this.editUser=function(e,a){var n=a.username,r=a.name,c=a.email,l=a.country,i=a.city,o=a.street,s=a.area_code;return t.service.patch("/".concat(e),{username:n,name:r,email:c,country:l,city:i,street:o,area_code:s}).then(function(e){return e.data})},this.addOperation=function(e,a){var n=a.operations;return t.service.post("/addOper/".concat(e),{operations:n}).then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://muverr.herokuapp.com","/api/user"),withCredentials:!0})};a(81).config();var T=function e(){var t=this;Object(i.a)(this,e),this.openTransactions=function(){return t.service.get("/open").then(function(e){return e.data})},this.createTransaction=function(e,a,n,r,c,l,i,o,s){return t.service.post("/createtransaction/",{seller:e,amount:a,rate:n,currency:r,bolivares:c,beneficiaryName:l,beneficiaryBank:i,beneficiaryNationalId:o,beneficiaryBankAccount:s}).then(function(e){return e.data})},this.getTransaction=function(e){return t.service.get("/transaction/".concat(e)).then(function(e){return e.data})},this.editTransaction=function(e,a){var n=a.buyer,r=a.classification;return t.service.patch("/transaction/".concat(e),{buyer:n,classification:r}).then(function(e){return e.data})},this.payTransaction=function(e,a){var n=a.classification;return console.log(n),t.service.patch("/transactionpaid/".concat(e),{classification:n}).then(function(e){return e.data})},this.confirmTransaction=function(e,a){var n=a.classification;return console.log(n),t.service.patch("/transactionconfirmed/".concat(e),{classification:n}).then(function(e){return e.data})},this.cancelBuyOrder=function(e){var a=e.buyerId,n=e.operId;return t.service.patch("/cancelbuyorder/",{buyerId:a,operId:n}).then(function(e){return e.data})},this.cancelSellOrder=function(e){var a=e.sellerId,n=e.operId;return t.service.patch("/cancelsellorder/",{sellerId:a,operId:n}).then(function(e){return e.data})},this.deleteTransaction=function(e){return t.service.delete("/".concat(e)).then(function(e){return e.data})},this.service=E.a.create({baseURL:"".concat("https://muverr.herokuapp.com","/api/transactions"),withCredentials:!0})},U=a(58),_=a.n(U),R=a(60),B=a.n(R),D=a(59),F=a.n(D),A=a(21),L=a.n(A),M=a(395),W=a(62),z=a.n(W),H=a(64),q=a.n(H),V=a(6),Y=a.n(V),$=a(63),G=a.n($),K=a(34),J=a.n(K),X=a(24),Z=a.n(X),Q=a(99),ee=a(152),te=a.n(ee),ae=a(153),ne=a.n(ae),re=a(22),ce=a.n(re),le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={messages:[],input:"",color:"default",onDelete:"none",avatar:"icon",icon:"none",variant:"default"},a.match=e.match,a.props=e,a.room=a.match.params.transactionId,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket=te()("".concat("https://muverr.herokuapp.com")),this.socket.emit("subscribe",this.room),this.socket.on("output",function(t){console.log(t),e.setState({messages:t.conversation})}),this.socket.on("conversation private post",function(t){console.log(t),e.receiveMessage(t)})}},{key:"receiveMessage",value:function(e){this.setState({input:"",messages:Object(Q.a)(this.state.messages).concat([e])})}},{key:"submitChat",value:function(){var e=this.state.input;this.setState({input:"",messages:Object(Q.a)(this.state.messages).concat([{message:e,room:this.room,timestamp:Date.now(),userId:this.props.userInSession._id}])}),console.log(this.state.messages),this.socket.emit("send message",{message:e,room:this.room,timestamp:Date.now(),userId:this.props.userInSession._id})}},{key:"render",value:function(){var e=this,t=this.state,a=t.messages,n=t.input;return r.a.createElement("div",{className:"chat-holder"},r.a.createElement(Z.a,{className:"chat-window"},r.a.createElement("div",{className:"msg"},a.map(function(t,a){return r.a.createElement("div",{className:t.userId===e.props.userInSession._id?"msg me":"msg server",key:a},r.a.createElement(ne.a,{label:t.message,color:t.userId===e.props.userInSession._id?"primary":"default",avatar:e.state.avatarToPlayground,icon:e.state.iconToPlayground,variant:e.state.variant}))}))),r.a.createElement(ce.a,{id:"standard-bare",className:"textField",fullWidth:!0,placeholder:"Type your message here",value:n,margin:"normal",onChange:function(t){return e.setState({input:t.currentTarget.value})},onKeyDown:function(t){return 13==t.keyCode?e.submitChat():null}}))}}]),t}(r.a.Component),ie=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getUser=function(e){a.service.getUser(e).then(function(e){var t=e[0];a.setState({user:t})})},a.componentDidMount=function(){return a.getUser(a.props.userInSession._id)},a.componentWillReceiveProps=function(){return a.getUser(a.props.userInSession._id)},a.cancelBuyOrder=function(e,t){a.transactionService.cancelBuyOrder({buyerId:e,operId:t}).then(function(){a.getUser(a.props.userInSession._id)}).catch(function(e){return console.log(e)})},a.cancelSellOrder=function(e,t){a.transactionService.cancelSellOrder({sellerId:e,operId:t}).then(function(){a.getUser(a.props.userInSession._id)}).catch(function(e){return console.log(e)})},a.paymentRedirect=function(e){return console.log(e),r.a.createElement(M.a,{to:"/checkout/+".concat(e)})},a.confirmPayment=function(e){a.transactionService.confirmTransaction(e,{classification:"CONFIRMED"}).then(function(){a.getUser(a.props.userInSession._id)}).catch(function(e){return console.log(e)})},a.state={user:null,profile:!0},a.service=new x,a.transactionService=new T,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;null===this.state.user&&this.getUser(this.props.userInSession._id);var t=Object(w.a)({},this.state.user),a=this.props.classes,n=t.operations,c=[],l=[];this.state.user&&n&&(console.log(n),c=n.filter(function(t){return t.seller._id!==e.props.userInSession._id}),l=n.filter(function(t){return t.seller._id===e.props.userInSession._id}));var i=function(t){return r.a.createElement(Z.a,{className:a.root},r.a.createElement(C.a,null,r.a.createElement(L.a,{variant:"h6",id:"tableTitle"}," Buy Operations")),r.a.createElement(z.a,{className:a.table},r.a.createElement(G.a,null,r.a.createElement(J.a,null,r.a.createElement(Y.a,null,"Amount"),r.a.createElement(Y.a,null,"Rate"),r.a.createElement(Y.a,null,"Bolivares"),r.a.createElement(Y.a,null,"Beneficiary Bank"),r.a.createElement(Y.a,null,"Seller"),r.a.createElement(Y.a,null,"Chat"),r.a.createElement(Y.a,null,"Pay"),r.a.createElement(Y.a,null,"Confirmation Status"),r.a.createElement(Y.a,null,"Rate Tx"),r.a.createElement(Y.a,null,"Cancel"))),r.a.createElement(q.a,null,t.map(function(t){return r.a.createElement(J.a,{key:t._id},r.a.createElement(Y.a,{component:"th",scope:"row"},t.amount),r.a.createElement(Y.a,{numeric:!0},t.rate),r.a.createElement(Y.a,{numeric:!0},t.bolivares),r.a.createElement(Y.a,{numeric:!0},t.beneficiaryBank),r.a.createElement(Y.a,{numeric:!0},t.seller.username),r.a.createElement(Y.a,null,"OPEN"!==t.classification?r.a.createElement(I.a,{color:"primary",size:"medium",onClick:function(a){return e.chat(t._id)}},r.a.createElement(f.a,{className:"link-style",to:"/transactionChat/"+t._id}," Chat ")):null),r.a.createElement(Y.a,null,"IN PROCESS"===t.classification?r.a.createElement(I.a,{color:"primary",size:"medium"},r.a.createElement(f.a,{className:"link-style",to:"/checkout/"+t._id}," Pay ")):null),r.a.createElement(Y.a,null,"PAID"===t.classification?r.a.createElement(I.a,{color:"primary",size:"medium"}," Waiting for Confirmation "):null),r.a.createElement(Y.a,null,"CONFIRMED"===t.classification?r.a.createElement(I.a,{color:"primary",size:"medium",onClick:function(t){return e.ratePayment(t)}}," Rate "):null),r.a.createElement(Y.a,null,"IN PROCESS"===t.classification||"OPEN"===t.classification?r.a.createElement(I.a,{color:"primary",size:"medium",onClick:function(a){return e.cancelBuyOrder(e.props.userInSession._id,t.id)}},"Cancel Order"):null))}))))},o=function(t){return r.a.createElement(Z.a,{className:a.root},r.a.createElement(C.a,null,r.a.createElement(L.a,{variant:"h6",id:"tableTitle"}," Sell Operations")),r.a.createElement(z.a,{className:a.table},r.a.createElement(G.a,null,r.a.createElement(J.a,null,r.a.createElement(Y.a,null,"Amount"),r.a.createElement(Y.a,null,"Rate"),r.a.createElement(Y.a,null,"Bolivares"),r.a.createElement(Y.a,null,"Beneficiary Bank"),r.a.createElement(Y.a,null,"Seller"),r.a.createElement(Y.a,null,"Chat"),r.a.createElement(Y.a,null,"Confirm Payment"),r.a.createElement(Y.a,null,"Rate"),r.a.createElement(Y.a,null,"Cancel"))),r.a.createElement(q.a,null,t.map(function(t){return r.a.createElement(J.a,{key:t._id},r.a.createElement(Y.a,{component:"th",scope:"row"},t.amount),r.a.createElement(Y.a,{numeric:!0},t.rate),r.a.createElement(Y.a,{numeric:!0},t.bolivares),r.a.createElement(Y.a,{numeric:!0},t.beneficiaryBank),r.a.createElement(Y.a,{numeric:!0},t.seller.username),r.a.createElement(Y.a,null,"OPEN"!==t.classification?r.a.createElement(I.a,{color:"primary",size:"medium",onClick:function(a){return e.chat(t._id)}},r.a.createElement(f.a,{className:"link-style",to:"/transactionChat/"+t._id}," Chat ")):null),r.a.createElement(Y.a,null,"PAID"===t.classification?r.a.createElement(I.a,{color:"primary",size:"medium",onClick:function(a){return e.confirmPayment(t._id)}}," Confirm Payment "):null),r.a.createElement(Y.a,null,"CONFIRMED"===t.classification?r.a.createElement(I.a,{color:"primary",size:"medium",onClick:function(t){return e.ratePayment(t)}}," Rate "):null),r.a.createElement(Y.a,null,"IN PROCESS"===t.classification||"OPEN"===t.classification?r.a.createElement(I.a,{color:"primary",size:"medium",onClick:function(a){return e.cancelSellOrder(e.props.userInSession._id,t.id)}},"Cancel Order"):null))}))))};return r.a.createElement("div",{className:"profile-container"},r.a.createElement("div",{className:"personal-details-container"},r.a.createElement(_.a,{className:"card-style"},r.a.createElement(F.a,null,r.a.createElement(L.a,{className:a.title,color:"textSecondary",gutterBottom:!0},t.name),r.a.createElement(L.a,{variant:"h5",component:"h2"},t.username),r.a.createElement(L.a,{className:a.pos,color:"textSecondary"},t.email),r.a.createElement(L.a,{component:"p"},t.country),r.a.createElement(L.a,{component:"p"},new Date(t.created_at).toDateString())),r.a.createElement(B.a,null,r.a.createElement(I.a,null,r.a.createElement(f.a,{to:"/user/edit/"},"Edit"))))),r.a.createElement("div",{className:"tx-details-holder"},r.a.createElement("div",{className:i},i(c)),r.a.createElement("div",{className:o},o(l))))}}]),t}(n.Component),oe=Object(b.withStyles)({title:{fontSize:14},pos:{marginBottom:12}})(ie),se=a(5),ue=a.n(se),me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){var t=Object(w.a)({},a.state.user);e.preventDefault();var n=a.props.userInSession._id,r=t.username,c=t.name,l=t.email,i=t.country,o=t.city,s=t.street,u=t.area_code;a.service.editUser(n,{username:r,name:c,email:l,country:i,city:o,street:s,area_code:u}).then(function(e){console.log("Patch?",e)}).then(function(){a.setState({redirectToProfile:!0})}).catch(function(e){return console.log(e)})},a.getUser=function(e){a.service.getUser(e).then(function(e){var t=Object(p.a)({},a.state.user,e[0]);a.setState({user:t})})},a.componentDidMount=function(){return a.getUser(a.props.userInSession._id)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value,c=Object(p.a)({},a.state.user);c[n]=r,a.setState({user:c})},a.state={redirectToProfile:!1,user:{username:"",password:"",email:"",country:"",city:"",street:"",area_code:""}},a.service=new x,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=Object(w.a)({},this.state.user);return this.state.redirectToProfile?r.a.createElement(M.a,{to:"/profile"}):r.a.createElement("div",null,r.a.createElement(Z.a,{className:"transaction-holder"},r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off",onSubmit:this.handleFormSubmit},r.a.createElement(ce.a,{id:"outlined-simple-start-adornment",className:ue()(t.margin,t.textField,t.inputLabelShrink),variant:"outlined",label:"Username",placeholder:a.username,name:"username",InputLabelProps:{shrink:!0},InputProps:{readOnly:!0}}),r.a.createElement(ce.a,{id:"outlined-simple-start-adornment",className:ue()(t.margin,t.textField),variant:"outlined",label:"Name",name:"name",placeholder:a.name,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}}),r.a.createElement(ce.a,{id:"outlined-simple-start-adornment",className:ue()(t.margin,t.textField),variant:"outlined",label:"Email",name:"email",placeholder:a.email,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}}),r.a.createElement(ce.a,{id:"outlined-simple-start-adornment",className:ue()(t.margin,t.textField),variant:"outlined",label:"Country",name:"country",placeholder:a.country,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}}),r.a.createElement(ce.a,{id:"outlined-simple-start-adornment",className:ue()(t.margin,t.textField),variant:"outlined",label:"City",name:"city",placeholder:a.city,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}}),r.a.createElement(ce.a,{id:"outlined-simple-start-adornment",className:ue()(t.margin,t.textField),variant:"outlined",label:"Street",name:"street",placeholder:a.street,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}}),r.a.createElement(ce.a,{id:"outlined-simple-start-adornment",className:ue()(t.margin,t.textField),variant:"outlined",label:"Area Code",name:"area_code",type:"number",placeholder:a.area_code,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}}),r.a.createElement("input",{type:"submit",value:"Edit Profile"}))))}}]),t}(n.Component),de=Object(b.withStyles)(function(e){return{textField:{width:"92%",flexBasis:200,margin:10},inputLabelShrink:{shrink:!0}}})(me),he=a(36),pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password,r=a.state.email,c=a.state.country,l=a.state.city,i=a.state.street,o=a.state.area_code,s=a.state.photo;a.service.signup(t,n,r,c,l,i,o,s).then(function(e){a.setState({username:"",password:"",email:"",country:"",city:"",street:"",area_code:"",photo:""}),a.props.getUser(e.user)}).catch(function(e){return console.log(e)})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;if("photo"===e.target.name){var c=e.target.files[0];a.setState({photo:c})}else a.setState(Object(he.a)({},n,r))},a.state={username:"",password:"",email:"",country:"",city:"",street:"",area_code:"",photo:null},a.service=new v,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("h3",null,"Welcome!, create your account next:"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},r.a.createElement("fieldset",null,r.a.createElement("label",null,"Username:"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Password:"),r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"email:"),r.a.createElement("input",{type:"text",name:"email",value:this.state.email,onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Country:"),r.a.createElement("input",{type:"text",name:"country",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"City:"),r.a.createElement("input",{type:"text",name:"city",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Street:"),r.a.createElement("input",{type:"text",name:"street",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",null,"Area code:"),r.a.createElement("input",{type:"text",name:"area_code",onChange:function(t){return e.handleChange(t)}})),r.a.createElement("fieldset",null,r.a.createElement("label",{className:"btn btn-primary"},r.a.createElement("input",{type:"file",name:"photo",className:"",placeholder:"Product Photo",onChange:function(t){return e.handleChange(t)}}))),r.a.createElement("input",{type:"submit",value:"Sign up"})))}}]),t}(n.Component),fe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){e.preventDefault();var t=a.state.username,n=a.state.password;a.service.login(t,n).then(function(e){a.setState({username:t,password:n,error:!1}),a.props.getUser(e)}).catch(function(e){a.setState({username:t,password:n,error:!0})})},a.setRedirect=function(){a.setState({redirectToHome:!0})},a.renderRedirect=function(){if(a.state.redirectToHome)return r.a.createElement(M.a,{to:"/"})},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(he.a)({},n,r)),console.log(a.state)},a.state={username:"",password:"",error:!0,redirectToHome:!1},a.service=new v,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirectHome&&this.renderRedirect(),r.a.createElement("div",null,r.a.createElement(Z.a,{className:"login-form-holder"},r.a.createElement("h3",null,"Welcome back!"),r.a.createElement("form",{onSubmit:this.handleFormSubmit},!this.state.error&&this.renderRedirect(),r.a.createElement(ce.a,{className:"input-holder",fullWidth:!0,type:"text",label:"Username",name:"username",onChange:function(t){return e.handleChange(t)}}),r.a.createElement(ce.a,{className:"input-holder",fullWidth:!0,type:"password",label:"Password",name:"password",onChange:function(t){return e.handleChange(t)}}),r.a.createElement("input",{type:"submit",value:"Login",class:"login-button",onClick:this.setRedirect}))))}}]),t}(n.Component),ge=a(157),Ee=a.n(ge),ve=a(156),be=a.n(ve),ye=a(155),Se=a.n(ye),Oe=a(40),Ce=a(154),ke=a.n(Ce);function Ie(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}var je=[{id:"details",numeric:!1,disablePadding:!1,label:"Details"},{id:"seller",numeric:!1,disablePadding:!1,label:"Seller"},{id:"rating",numeric:!1,disablePadding:!1,label:"Rating"},{id:"rate",numeric:!0,disablePadding:!1,label:"Rate"},{id:"amount",numeric:!0,disablePadding:!1,label:"Amount"},{id:"bolivares",numeric:!0,disablePadding:!1,label:"Bolivares"},{id:"created",numeric:!1,disablePadding:!1,label:"Created"}],Ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).createSortHandler=function(e){return function(t){a.props.onRequestSort(t,e)}},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.order,n=t.orderBy;return r.a.createElement(G.a,null,r.a.createElement(J.a,null,je.map(function(t){return r.a.createElement(Y.a,{key:t.id,numeric:t.numeric,padding:t.disablePadding?"none":"default",sortDirection:n===t.id&&a},r.a.createElement(Se.a,{title:"Sort",placement:t.numeric?"bottom-end":"bottom-start",enterDelay:300},r.a.createElement(be.a,{active:n===t.id,direction:a,onClick:e.createSortHandler(t.id)},t.label)))},this)))}}]),t}(r.a.Component),Pe=function(e){var t=e.classes;return r.a.createElement(C.a,{className:ue()(t.root)},r.a.createElement("div",{className:t.title},r.a.createElement(L.a,{variant:"h6",id:"tableTitle"},"Transactions")),r.a.createElement("div",{className:t.spacer}))};Pe=Object(b.withStyles)(function(e){return{root:{paddingRight:e.spacing.unit},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Oe.lighten)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},spacer:{flex:"1 1 100%"},actions:{color:e.palette.text.secondary},title:{flex:"0 0 auto"}}})(Pe);var we=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).handleRequestSort=function(t,a){var n=a,r="asc";e.state.orderBy===a&&"asc"===e.state.order&&(r="desc"),e.setState({order:r,orderBy:n})},e.handleSelectAllClick=function(t){t.target.checked?e.setState(function(e){return{selected:e.data.map(function(e){return e.id})}}):e.setState({selected:[]})},e.handleClick=function(t,a){var n=e.state.selected,r=n.indexOf(a),c=[];-1===r?c=c.concat(n,a):0===r?c=c.concat(n.slice(1)):r===n.length-1?c=c.concat(n.slice(0,-1)):r>0&&(c=c.concat(n.slice(0,r),n.slice(r+1))),e.setState({selected:c})},e.handleChangePage=function(t,a){e.setState({page:a})},e.handleChangeRowsPerPage=function(t){e.setState({rowsPerPage:t.target.value})},e.isSelected=function(t){return-1!==e.state.selected.indexOf(t)},e.state={order:"desc",orderBy:"rate",selected:[],data:[],page:0,rowsPerPage:10},e.service=new T,e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.service.openTransactions().then(function(t){t.error||e.setState({data:t})})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state,n=a.data,c=a.order,l=a.orderBy,i=a.selected,o=a.rowsPerPage,s=a.page,u=o-Math.min(o,n.length-s*o);return r.a.createElement(Z.a,{className:t.root},r.a.createElement(Pe,{numSelected:i.length}),r.a.createElement("div",{className:t.tableWrapper},r.a.createElement(z.a,{className:t.table,"aria-labelledby":"tableTitle"},r.a.createElement(Ne,{numSelected:i.length,order:c,orderBy:l,onSelectAllClick:this.handleSelectAllClick,onRequestSort:this.handleRequestSort,rowCount:n.length}),r.a.createElement(q.a,null,function(e,t){var a=e.map(function(e,t){return[e,t]});return a.sort(function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]}),a.map(function(e){return e[0]})}(n,function(e,t){return"desc"===e?function(e,a){return Ie(e,a,t)}:function(e,a){return-Ie(e,a,t)}}(c,l)).slice(s*o,s*o+o).map(function(t){if("OPEN"===t.classification&&t.seller._id!==e.props.userInSession._id)return r.a.createElement(J.a,{hover:!0,tabIndex:-1,key:t._id},r.a.createElement(Y.a,{component:"th",scope:"row",padding:"none"},r.a.createElement(f.a,{to:"/transaction/"+t._id}," GO ")),r.a.createElement(Y.a,{numeric:!0},t.seller.username),r.a.createElement(Y.a,{numeric:!0},t.seller.rating),r.a.createElement(Y.a,{numeric:!0},t.amount),r.a.createElement(Y.a,{numeric:!0},t.rate),r.a.createElement(Y.a,{numeric:!0},t.bolivares),r.a.createElement(Y.a,null,ke()(t.created_at).format("MM/DD/YYYY")))}),u>0&&r.a.createElement(J.a,{style:{height:49*u}},r.a.createElement(Y.a,{colSpan:6}))))),r.a.createElement(Ee.a,{component:"div",count:n.length,rowsPerPage:o,page:s,backIconButtonProps:{"aria-label":"Previous Page"},nextIconButtonProps:{"aria-label":"Next Page"},onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleChangeRowsPerPage}))}}]),t}(r.a.Component),xe=Object(b.withStyles)(function(e){return{root:{marginTop:"5%",marginLeft:"9%",width:"80%",padding:20},table:{minWidth:600},tableWrapper:{overflowX:"auto"}}})(we),Te=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this))).getTransaction=function(e){a.service.getTransaction(e).then(function(e){a.setState({transaction:e})})},a.componentWillReceiveProps=function(e){return a.getTransaction(e.match.params.transactionId)},a.componentDidMount=function(){return a.getTransaction(a.match.params.transactionId)},a.changeStatusToInProcess=function(){var e=a.state.transaction._id,t=a.state.transaction._id,n=a.props.userInSession._id;a.service.editTransaction(e,{buyer:n,classification:"IN PROCESS"}).then(function(){a.UserService.addOperation(n,{operations:t})}).then(function(){a.setState({redirectToProfile:!0})}).catch(function(e){return console.log(e)})},a.state={redirectToProfile:!1,transaction:{}},a.match=e.match,a.props=e,a.service=new T,a.AuthService=new v,a.UserService=new x,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var t=this.props.classes;if(this.state.transaction._id){var a=Object(w.a)({},this.state.transaction);return this.state.redirectToProfile?r.a.createElement(M.a,{to:"/profile"}):r.a.createElement(_.a,{className:t.card},r.a.createElement(F.a,null,r.a.createElement(L.a,{className:t.title,color:"textSecondary",gutterBottom:!0},"Transaction Details"),r.a.createElement(L.a,{variant:"h5",component:"h2"},"Seller: ",a.seller.name),r.a.createElement(L.a,{className:t.pos,color:"textSecondary"},"Rating: ..."),r.a.createElement(L.a,{component:"p"},"Amount: ",a.amount),r.a.createElement(L.a,{component:"p"},"Rate: ",a.rate),r.a.createElement(L.a,{component:"p"},"Bolivares: ",a.bolivares),r.a.createElement(L.a,{component:"p"},"Classification: ",a.classification)),r.a.createElement(B.a,null,r.a.createElement(I.a,{size:"medium",onClick:function(t){return e.changeStatusToInProcess(t)}},"Buy")))}return r.a.createElement("div",null)}}]),t}(n.Component),Ue=Object(b.withStyles)({card:{minWidth:275,width:"20%"},title:{fontSize:14},pos:{marginBottom:12}})(Te),_e=a(158),Re=a.n(_e),Be=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleFormSubmit=function(e){console.log("event submit");var t=Object(w.a)({},a.state.deal);e.preventDefault();var n=a.props.userInSession._id,r=parseInt(t.amount),c=parseInt(t.rate),l=t.currency,i=parseInt(t.bolivares),o=t.beneficiaryName,s=parseInt(t.beneficiaryBank),u=parseInt(t.beneficiaryNationalId),m=parseInt(t.beneficiaryBankAccount);a.service.createTransaction(n,r,c,l,i,o,s,u,m).then(function(e){console.log("Create",e)}).then(function(){a.setState({redirectToProfile:!0})}).catch(function(e){return console.log(e)})},a.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},a.handleChange=function(e){var t=e.target,n=t.name,r=t.value,c=Object(p.a)({},a.state.deal);c[n]=r,a.setState({deal:c},function(){a.state.deal.amount&&a.state.deal.rate&&a.calcTotal()})},a.handleCurrencyChange=function(e){return function(t){console.log(t.target.value),a.setState(Object(he.a)({},e,t.target.value))}},a.currencies=[{value:"USD",label:"$"},{value:"EUR",label:"\u20ac"}],a.state={redirectToProfile:!1,deal:{amount:0,rate:0,currency:"EUR",bolivares:0,beneficiaryName:"",beneficiaryBank:"",beneficiaryNationalId:"",beneficiaryBankAccount:""}},a.service=new T,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"calcTotal",value:function(){var e=this.state.deal.amount*this.state.deal.rate;console.log(e);var t=Object(p.a)({},this.state.deal);t.bolivares=e,this.setState({deal:t})}},{key:"render",value:function(){var e=this,t=this.props.classes;return this.state.redirectToProfile?r.a.createElement(M.a,{to:"/profile"}):r.a.createElement(Z.a,{className:"transaction-holder"},r.a.createElement("h1",null,"Enter transactions details:"),r.a.createElement("form",{className:t.root,noValidate:!0,autoComplete:"off",onSubmit:this.handleFormSubmit},Re.a.map(this.state.deal,function(a,n){return"amount"===n||"rate"===n||"bolivares"===n||"currency"===n?r.a.createElement(ce.a,{key:n,className:ue()(t.margin,t.textField,t.numberInput),variant:"outlined",label:e.capitalizeFirstLetter(n).replace(/([A-Z])/g," $1"),name:n,placeholder:a,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}}):r.a.createElement(ce.a,{key:n,className:ue()(t.margin,t.textField),variant:"outlined",label:e.capitalizeFirstLetter(n).replace(/([A-Z])/g," $1"),name:n,placeholder:a,onChange:function(t){return e.handleChange(t)},InputLabelProps:{shrink:!0}})}),r.a.createElement(I.a,{type:"submit",variant:"outlined",className:t.button},"Send Money")))}}]),t}(n.Component),De=Object(b.withStyles)(function(e){return{textField:{width:"92%",flexBasis:200,margin:10},inputLabelShrink:{shrink:!0},numberInput:{width:"45%"},button:{margin:e.spacing.unit},input:{display:"none"}}})(Be),Fe=a(50),Ae=a(98),Le=a.n(Ae),Me=a(159),We=a(61),ze=a(51),He=a.n(ze),qe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getTransaction=function(e){a.txservice.getTransaction(e).then(function(e){a.setState({transaction:e})})},a.componentDidMount=function(){return a.getTransaction(a.props.txId)},a.changeStatusToInPaid=function(){var e=a.state.transaction._id;a.txservice.payTransaction(e,{classification:"PAID"}).then(function(){a.setState({redirectToProfile:!0})}).catch(function(e){return console.log(e)})},a.state={complete:!1,transaction:{}},a.submit=a.submit.bind(Object(We.a)(Object(We.a)(a))),a.service=new v,a.txservice=new T,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"submit",value:function(){var e=Object(Me.a)(Le.a.mark(function e(t){var a,n,r=this;return Le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.props.stripe.createToken({name:"Name"});case 2:return a=e.sent,n=a.token,e.next=6,this.service.payment(n).then(function(e){e.ok&&r.setState({complete:!0})}).then(function(){r.state.complete&&r.changeStatusToInPaid()}).catch(function(e){return console.log(e)});case 6:e.sent;case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.classes;if(this.state.complete)return r.a.createElement("h1",null,"Purchase Complete");if(this.state.transaction._id){var t=Object(w.a)({},this.state.transaction);return r.a.createElement(Z.a,{className:"checkout"},r.a.createElement("div",{className:"paymentHolder"},r.a.createElement("h1",null,"Checkout"),r.a.createElement(L.a,{className:e.title,color:"textSecondary",gutterBottom:!0},"Transaction Details"),r.a.createElement(L.a,{variant:"h5",component:"h2"},"Seller: ",t.seller.name),r.a.createElement(L.a,{className:e.pos,color:"textSecondary"},"Rating: ",t.rating),r.a.createElement(L.a,{component:"p"},"Amount: ",t.amount),r.a.createElement(L.a,{component:"p"},"Rate: ",t.rate),r.a.createElement(L.a,{component:"p"},"Bolivares: ",t.bolivares)),r.a.createElement("div",{className:"paymentHolder"},r.a.createElement(L.a,{variant:"h6",gutterBottom:!0},"Please enter your payment details"),r.a.createElement(He.a,{container:!0,spacing:24},r.a.createElement(He.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{required:!0,id:"cardName",label:"Name on card",fullWidth:!0})),r.a.createElement(He.a,{item:!0,xs:12,md:6},r.a.createElement(ce.a,{required:!0,id:"billingAdress",label:"Billing Address",fullWidth:!0})),r.a.createElement(He.a,{item:!0,xs:12,md:6},r.a.createElement(Fe.CardElement,{fullWidth:!0})),r.a.createElement(He.a,{item:!0,xs:12})),r.a.createElement("button",{onClick:this.submit},"Complete payment")))}return""}}]),t}(n.Component),Ve=Object(Fe.injectStripe)(Object(b.withStyles)({card:{minWidth:275,width:"20%"},title:{fontSize:14},pos:{marginBottom:12}})(qe)),Ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={txId:a.props.match.params.transactionId},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(Fe.StripeProvider,{apiKey:"pk_test_TkH6C0gc5rbqXpV8KrqnM68E"},r.a.createElement("div",{className:"example"},r.a.createElement(Fe.Elements,null,r.a.createElement(Ve,{txId:this.state.txId}))))}}]),t}(n.Component),$e=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).getTheUser=function(e){a.setState({loggedInUser:e})},a.logout=function(){a.service.logout().then(function(){a.setState({loggedInUser:null})})},a.state={loggedInUser:null},a.service=new v,a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"fetchUser",value:function(){var e=this;null===this.state.loggedInUser&&this.service.loggedin().then(function(t){e.setState({loggedInUser:t})}).catch(function(t){e.setState({loggedInUser:!1})})}},{key:"render",value:function(){var e=this;return this.fetchUser(),this.state.loggedInUser?r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(N,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(d.a,{exact:!0,path:"/",logout:this.logout,render:function(){return r.a.createElement(P,{userInSession:e.state.loggedInUser})}}),r.a.createElement(d.a,{exact:!0,path:"/Profile",logout:this.logout,render:function(){return r.a.createElement(oe,{userInSession:e.state.loggedInUser})}}),r.a.createElement(d.a,{exact:!0,path:"/user/edit",logout:this.logout,render:function(){return r.a.createElement(de,{userInSession:e.state.loggedInUser})}}),r.a.createElement(d.a,{exact:!0,path:"/transactions",render:function(){return r.a.createElement(xe,{userInSession:e.state.loggedInUser})}}),r.a.createElement(d.a,{exact:!0,path:"/sendmoney",render:function(){return r.a.createElement(De,{userInSession:e.state.loggedInUser})}}),r.a.createElement(d.a,{path:"/transaction/:transactionId",component:function(t){var a=t.match;return r.a.createElement(Ue,{match:a,userInSession:e.state.loggedInUser})}}),r.a.createElement(d.a,{path:"/checkout/:transactionId",component:function(t){var a=t.match;return r.a.createElement(Ye,{match:a,userInSession:e.state.loggedInUser})}}),r.a.createElement(d.a,{path:"/transactionChat/:transactionId",component:function(t){var a=t.match;return r.a.createElement(le,{match:a,userInSession:e.state.loggedInUser})}}))):r.a.createElement("div",{className:"App"},r.a.createElement("header",null,r.a.createElement(N,{userInSession:this.state.loggedInUser,logout:this.logout}),r.a.createElement(h.a,null,r.a.createElement(d.a,{exact:!0,path:"/signup",render:function(){return r.a.createElement(pe,{getUser:e.getTheUser})}}),r.a.createElement(d.a,{exact:!0,path:"/login",render:function(){return r.a.createElement(fe,{getUser:e.getTheUser})}}))))}}]),t}(n.Component),Ge=a(394);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(Ge.a,null,r.a.createElement($e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},45:function(e,t,a){}},[[160,2,1]]]);
//# sourceMappingURL=main.13cbfdb8.chunk.js.map